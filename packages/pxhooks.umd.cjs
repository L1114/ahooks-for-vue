(function(n,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue-demi")):typeof define=="function"&&define.amd?define(["exports","vue-demi"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n.pxhooks={},n.vueDemi))})(this,function(n,t){"use strict";const q=(y,{dataFilter:T=f=>f,defaultParams:I={},manual:b,onBefore:l,onSuccess:c,onError:a,onFinally:m,throttleWait:i=0,throttleTrailing:j=!1}={})=>{const f=t.ref(T(null)),u=t.ref([]),w=t.ref(null);let p=0,x=null;const r=s=>{const h=Math.random();return new Promise((v,g)=>{const o=e=>{g(e),a==null||a(e)};l==null||l(),u.value.push(h),p=Date.now(),(async()=>{try{const e=await y(s||I).catch(M=>{o(M)});console.log("response",e);const d=T(e);f.value=d,v(d),c==null||c(d)}catch(e){w.value=e,o(e)}finally{let e=u.value.findIndex(d=>d===h);e>=0&&u.value.splice(e,1),m==null||m()}})()})},D=s=>!i||i<=0?r(s):Date.now()-p<i?new Promise((v,g)=>{const o=()=>{clearTimeout(x);const e=Date.now()-p;x=setTimeout(()=>{e>i?r(s).then(v).catch(g):o()},i-e)};j&&o()}):r(s);return!b&&D(),console.log("loadingIds",u),{data:f,loading:t.computed(()=>{var s;return((s=u.value)==null?void 0:s.length)>0}),error:w,runAsync:D}};n.useRequest=q,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
