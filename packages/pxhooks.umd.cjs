(function(t,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue-demi")):typeof define=="function"&&define.amd?define(["exports","vue-demi"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.pxhooks={},t.vueDemi))})(this,function(t,n){"use strict";const y=(b,{dataFilter:T=l=>l,defaultParams:j={},manual:w,onBefore:d,onSuccess:f,onError:r,onFinally:a,throttleWait:o=0,throttleTrailing:k=!1}={})=>{const l=n.ref(T(null)),i=n.ref([]),D=n.ref(null);let p=0,q=null;const m=s=>{const v=Math.random();return new Promise((g,h)=>{const u=e=>{h(e),r==null||r(e)};d==null||d(),i.value.push(v),p=Date.now(),(async()=>{try{const e=await b(s||j).catch(M=>{u(M)});console.log("response",e);const c=T(e);l.value=c,g(c),f==null||f(c)}catch(e){D.value=e,u(e)}finally{let e=i.value.findIndex(c=>c===v);e>=0&&i.value.splice(e,1),a==null||a()}})()})},x=s=>!o||o<=0?m(s):Date.now()-p<o?new Promise((g,h)=>{const u=()=>{clearTimeout(q);const e=Date.now()-p;q=setTimeout(()=>{e>o?m(s).then(g).catch(h):u()},o-e)};k&&u()}):m(s);return console.log("manual",w),!w&&x(),console.log("loadingIds",i),{data:l,loading:n.computed(()=>{var s;return((s=i.value)==null?void 0:s.length)>0}),error:D,runAsync:x}},I=()=>(console.log("version"),process.env.npm_package_version);t.useRequest=y,t.version=I,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
