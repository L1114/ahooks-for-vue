var W=Object.defineProperty;var D=(t,e,n)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $=(t,e,n)=>(D(t,typeof e!="symbol"?e+"":e,n),n);import{h as X,i as H,j as z,k as v}from"./app-d2pSaZpu.js";import{c as y,a as F}from"./commonjsHelpers-1J56E-h6.js";const oe=async(...t)=>(console.log("mockFetch params: ",t),new Promise((e,n)=>{setTimeout(()=>{e(Math.random())},2e3)})),ce=async(...t)=>(console.log("mockFetch params: ",t),new Promise((e,n)=>{setTimeout(()=>{e(Math.random())},200)}));class J{constructor(e,n,r,i){$(this,"count",0);$(this,"state",X({loading:!1,data:void 0,error:void 0,params:[]}));this.serviceRef=e,this.options=n,this.subscribe=r,this.initState=i}run(...e){this.runAsync(...e).catch(n=>{this.options.onError||console.error(n)})}async runAsync(...e){this.count++;const n=this.count;try{this.state.loading=!0,this.state.params=e;const r=await this.serviceRef(...e);return n!==this.count?new Promise(()=>{}):(this.state.data=r,this.state.error=void 0,this.state.loading=!1,r)}catch(r){if(n!==this.count)return new Promise(()=>{});throw this.state.loading=!1,this.state.error=r,r}}cancel(){this.count++,this.state.loading=!1}mutate(e){this.state.data=e}refresh(){this.run(...this.state.params||[])}refreshAsync(){this.runAsync(...this.state.params||[])}}const K=(t,e={},n=[])=>{const r=new J(t,e,()=>{},n);r.options=e;let i=r.state.params||e.defaultParams||[];return i=Array.isArray(i)?i:[i],n.map(o=>o(r,e)),H(()=>{e!=null&&e.manual||r.run(...i)}),z(()=>{r.cancel()}),{loading:v(r.state,"loading"),data:v(r.state,"data"),error:v(r.state,"error"),params:v(r.state,"params"),cancel:r.cancel.bind(r),refresh:r.refresh.bind(r),refreshAsync:r.refreshAsync.bind(r),run:r.run.bind(r),runAsync:r.runAsync.bind(r),mutate:r.mutate.bind(r)}};function Q(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var O=Q,V=typeof y=="object"&&y&&y.Object===Object&&y,Y=V,Z=Y,tt=typeof self=="object"&&self&&self.Object===Object&&self,et=Z||tt||Function("return this")(),C=et,rt=C,nt=function(){return rt.Date.now()},it=nt,at=/\s/;function st(t){for(var e=t.length;e--&&at.test(t.charAt(e)););return e}var ot=st,ct=ot,ut=/^\s+/;function ft(t){return t&&t.slice(0,ct(t)+1).replace(ut,"")}var dt=ft,lt=C,mt=lt.Symbol,N=mt,A=N,G=Object.prototype,bt=G.hasOwnProperty,gt=G.toString,g=A?A.toStringTag:void 0;function ht(t){var e=bt.call(t,g),n=t[g];try{t[g]=void 0;var r=!0}catch{}var i=gt.call(t);return r&&(e?t[g]=n:delete t[g]),i}var vt=ht,yt=Object.prototype,Tt=yt.toString;function jt(t){return Tt.call(t)}var pt=jt,E=N,$t=vt,St=pt,Ot="[object Null]",_t="[object Undefined]",k=E?E.toStringTag:void 0;function xt(t){return t==null?t===void 0?_t:Ot:k&&k in Object(t)?$t(t):St(t)}var wt=xt;function At(t){return t!=null&&typeof t=="object"}var Et=At,kt=wt,Pt=Et,Rt="[object Symbol]";function It(t){return typeof t=="symbol"||Pt(t)&&kt(t)==Rt}var Ft=It,Ct=dt,P=O,Nt=Ft,R=NaN,Gt=/^[-+]0x[0-9a-f]+$/i,Mt=/^0b[01]+$/i,Lt=/^0o[0-7]+$/i,Ut=parseInt;function qt(t){if(typeof t=="number")return t;if(Nt(t))return R;if(P(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=P(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Ct(t);var n=Mt.test(t);return n||Lt.test(t)?Ut(t.slice(2),n?2:8):Gt.test(t)?R:+t}var Bt=qt,Wt=O,S=it,I=Bt,Dt="Expected a function",Xt=Math.max,Ht=Math.min;function zt(t,e,n){var r,i,o,c,a,u,f=0,l=!1,d=!1,T=!0;if(typeof t!="function")throw new TypeError(Dt);e=I(e)||0,Wt(n)&&(l=!!n.leading,d="maxWait"in n,o=d?Xt(I(n.maxWait)||0,e):o,T="trailing"in n?!!n.trailing:T);function j(s){var m=r,b=i;return r=i=void 0,f=s,c=t.apply(b,m),c}function L(s){return f=s,a=setTimeout(h,e),l?j(s):c}function U(s){var m=s-u,b=s-f,w=e-m;return d?Ht(w,o-b):w}function _(s){var m=s-u,b=s-f;return u===void 0||m>=e||m<0||d&&b>=o}function h(){var s=S();if(_(s))return x(s);a=setTimeout(h,U(s))}function x(s){return a=void 0,T&&r?j(s):(r=i=void 0,c)}function q(){a!==void 0&&clearTimeout(a),f=0,r=u=i=a=void 0}function B(){return a===void 0?c:x(S())}function p(){var s=S(),m=_(s);if(r=arguments,i=this,u=s,m){if(a===void 0)return L(u);if(d)return clearTimeout(a),a=setTimeout(h,e),j(u)}return a===void 0&&(a=setTimeout(h,e)),c}return p.cancel=q,p.flush=B,p}var M=zt;const Jt=F(M);var Kt=M,Qt=O,Vt="Expected a function";function Yt(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(Vt);return Qt(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Kt(t,e,{leading:r,maxWait:e,trailing:i})}var Zt=Yt;const te=F(Zt),ee=(t,{throttleWait:e,throttleLeading:n,throttleTrailing:r})=>{const i={};if(n!==void 0&&(i.leading=n),r!==void 0&&(i.trailing=r),e!==void 0&&e>0){const o=t.runAsync.bind(t),c=te(a=>{a()},e,i);t.runAsync=(...a)=>new Promise((u,f)=>{c(()=>{o==null||o(...a).then(l=>u(l)).catch(l=>f(l))})})}return{onCancel:()=>{}}},re=(t,{debounceWait:e,debounceLeading:n,debounceTrailing:r,debounceMaxWait:i})=>{let o=null;const c={};if(n!==void 0&&(c.leading=n),r!==void 0&&(c.trailing=r),i!==void 0&&(c.maxWait=i),e!==void 0&&e>0){const a=t.runAsync.bind(t);o=Jt(u=>{u()},e,c),t.runAsync=(...u)=>new Promise((f,l)=>{o(()=>{a==null||a(...u).then(d=>f(d)).catch(d=>l(d))})})}return{onCancel:()=>{o==null||o.cancel()}}},ne=(t,e,n)=>K(t,e,[...n||[],ee,re]),ue=ne;export{ce as a,oe as m,ue as u};
